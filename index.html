<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶∏‡ßÄ‡¶∞‡¶æ‡¶§‡ßÅ‡¶® ‡¶®‡¶¨‡ßÄ Ô∑∫ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶Ø‡ßã‡¶ó‡¶ø‡¶§‡¶æ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: #0f766e;
            background: -webkit-linear-gradient(135deg, #0f766e 0%, #065f46 50%, #064e3b 100%);
            background: linear-gradient(135deg, #0f766e 0%, #065f46 50%, #064e3b 100%);
            min-height: 100vh;
            padding: 8px;
            position: relative;
            overflow-x: hidden;
            transition: background 0.5s ease;
        }
        
        body.warning-time {
            background: #dc2626;
            background: -webkit-linear-gradient(135deg, #fca5a5 0%, #f87171 50%, #ef4444 100%);
            background: linear-gradient(135deg, #fca5a5 0%, #f87171 50%, #ef4444 100%);
            -webkit-animation: backgroundPulse 1s infinite;
            animation: backgroundPulse 1s infinite;
        }
        
        @-webkit-keyframes backgroundPulse {
            0%, 100% { 
                background: -webkit-linear-gradient(135deg, #fca5a5 0%, #f87171 50%, #ef4444 100%);
            }
            50% { 
                background: -webkit-linear-gradient(135deg, #fecaca 0%, #fca5a5 50%, #f87171 100%);
            }
        }
        
        @keyframes backgroundPulse {
            0%, 100% { 
                background: linear-gradient(135deg, #fca5a5 0%, #f87171 50%, #ef4444 100%);
            }
            50% { 
                background: linear-gradient(135deg, #fecaca 0%, #fca5a5 50%, #f87171 100%);
            }
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
            padding-bottom: 15px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            padding: 20px;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: #10b981;
        }
        
        h1 {
            color: #065f46;
            font-size: 1.8em;
            text-align: center;
            margin-bottom: 8px;
            font-weight: 800;
            line-height: 1.2;
        }
        
        .subtitle {
            color: #6b7280;
            text-align: center;
            margin-bottom: 16px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .info-box {
            background: #d1fae5;
            border-radius: 14px;
            padding: 16px;
            margin-bottom: 16px;
            border: 2px solid rgba(16, 185, 129, 0.2);
        }
        
        .info-box h3 {
            color: #065f46;
            margin-bottom: 10px;
            font-size: 16px;
            font-weight: 700;
        }
        
        .info-box ul {
            list-style: none;
            padding: 0;
        }
        
        .info-box li {
            color: #374151;
            margin: 6px 0;
            padding-left: 22px;
            position: relative;
            font-size: 13px;
            line-height: 1.4;
        }

        .info-box li::before {
            content: '\2713';
            position: absolute;
            left: 0;
            color: #10b981;
            font-weight: bold;
            font-size: 15px;
        }

        .warning-box {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 14px;
            padding: 12px;
            margin-bottom: 16px;
        }

        .warning-box p {
            color: #78350f;
            font-weight: 600;
            margin: 0;
            font-size: 12px;
            line-height: 1.4;
        }
        
        .form-group {
            margin-bottom: 14px;
        }
        
        label {
            display: block;
            color: #1f2937;
            font-weight: 700;
            margin-bottom: 6px;
            font-size: 13px;
        }
        
        input {
            width: 100%;
            padding: 12px 14px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 14px;
            background: white;
        }
        
        input:focus {
            outline: none;
            border-color: #10b981;
        }
        
        .btn {
            width: 100%;
            padding: 14px;
            font-size: 15px;
            font-weight: 700;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            display: block;
            text-align: center;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-primary {
            background: #10b981;
            color: white;
        }
        
        .btn-primary:active {
            background: #059669;
        }
        
        .btn-secondary {
    background: #e5e7eb;
    color: #374151;
    padding: 12px 14px;
    width: auto;
    font-size: 16px;  /* 13px ‡¶•‡ßá‡¶ï‡ßá 16px */
    display: inline-block;
    font-weight: 700;
}
        
        .btn-secondary:active {
            background: #d1d5db;
        }
        
        .btn-danger {
    background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
    color: #78350f;
    box-shadow: 0 4px 15px rgba(251, 191, 36, 0.4);
    font-size: 16px;
    font-weight: 800;
}

.btn-danger:active {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
}
        
        .timer-box {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 8px 12px;  
            margin-bottom: 12px;
            border: 2px solid rgba(16, 185, 129, 0.2);
        }
        
        .timer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }
        
        .timer-info {
            color: #065f46;
            font-weight: 700;
            font-size: 14px;
        }
        
        .timer {
            color: #ef4444;
            font-size: 20px;
            font-weight: 900 !important;
            font-family: 'Courier New', monospace;
        }
        
        .timer.warning {
            -webkit-animation: pulse 1s infinite;
            animation: pulse 1s infinite;
        }
        
        @-webkit-keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .progress-bar {
            width: 100%;
            height: 5px;
            background: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #10b981;
            border-radius: 10px;
        }
        
        .question-card {
            background: white;
            border-radius: 12px;
            padding: 18px;
            margin-bottom: 12px;
            border: 2px solid #f3f4f6;
            text-align: center;
        }
        
        .question-badge {
            display: inline-block;
            background: #d1fae5;
            color: #065f46;
            padding: 4px 10px;
            border-radius: 14px;
            font-size: 10px;
            font-weight: 700;
            margin-bottom: 8px;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .question-text {
            font-size: 15px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 14px;
            line-height: 1.3;
        }
        
        .option {
            width: 100%;
            padding: 11px 14px;
            margin: 5px 0;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            text-align: left;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            display: block;
        }
        
        .option:active {
            border-color: #10b981;
            background: #f0fdf4;
        }
        
        .option.selected {
            border-color: #10b981;
            background: #d1fae5;
        }
		
        .short-answer-input {
    width: 100%;
    padding: 12px 14px;
    margin: 10px 0;
    border: 2px solid #e5e7eb;
    border-radius: 10px;
    font-size: 15px;
    background: white;
    text-align: center;
    font-weight: 600;
}

.short-answer-input:focus {
    outline: none;
    border-color: #10b981;
    background: #f0fdf4;
}

.short-answer-input.filled {
    border-color: #10b981;
    background: #d1fae5;
}
		
        .nav-buttons {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 12px;
    gap: 10px;
}

.nav-buttons .btn-secondary {
    margin: 0;
    flex: 0 0 auto;  
    min-width: 80px;  
}

.nav-buttons .btn-danger {
    margin: 0;
    flex: 1;
}
        
        .success-icon {
            text-align: center;
            font-size: 80px;
            margin-bottom: 20px;
        }
        
        .success-message {
            text-align: center;
        }
        
        .success-message h2 {
            color: #065f46;
            font-size: 28px;
            margin-bottom: 16px;
            font-weight: 800;
        }
        
        .success-message p {
            color: #6b7280;
            font-size: 16px;
            margin: 12px 0;
            line-height: 1.5;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #6b7280;
        }
        
        .loading-spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #10b981;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            margin: 20px auto;
            -webkit-animation: spin 1s linear infinite;
            animation: spin 1s linear infinite;
        }
        
        @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.75);
            z-index: 10000;
            padding: 20px;
            display: table;
            width: 100%;
            height: 100%;
        }
        
        .modal-inner {
            display: table-cell;
            vertical-align: middle;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 16px;
            text-align: center;
            max-width: 420px;
            margin: 0 auto;
        }

        @media (max-width: 480px) {
            body {
                padding: 6px;
            }
            
            h1 {
                font-size: 1.4em;
            }
            
            .card {
                padding: 16px;
            }
            
            .timer-box {
                padding: 10px;
                margin-bottom: 12px;
            }
            
            .timer {
                font-size: 20px;
            }
            
            .progress-bar {
                height: 6px;
            }
            
            .question-text {
                font-size: 18px;
            }
            
            .option {
                font-size: 16px;
                padding: 18px 14px;
            }

            .modal-content {
                padding: 25px 20px;
            }
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
	
	function toBengaliNumber(num) {
    var bengali = ['‡ß¶', '‡ßß', '‡ß®', '‡ß©', '‡ß™', '‡ß´', '‡ß¨', '‡ß≠', '‡ßÆ', '‡ßØ'];
    return num.toString().split('').map(function(d) { return bengali[d]; }).join('');
}

function getBengaliOption(index) {
    var options = ['‡¶ï', '‡¶ñ', '‡¶ó', '‡¶ò'];
    return options[index];
}
	
        var GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzGG8_nTYLL4yd8SODuDCJthZARwoRqcAANAK832sypU5k-smKdOgMJq-biafvPy8OZ/exec';
        
        var QUESTIONS = [
    // MCQ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶ó‡ßÅ‡¶≤‡ßã
    {
        id: 1,
        type: 'mcq',
        question: '‡¶∞‡¶æ‡¶∏‡ßÇ‡¶≤‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π Ô∑∫ ‡¶ï‡ßã‡¶® ‡¶∏‡¶æ‡¶≤‡ßá ‡¶ú‡¶®‡ßç‡¶Æ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡ßá‡¶®?',
        options: ['‡ß´‡ß≠‡ß¶ ‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶¨‡ßç‡¶¶', '‡ß´‡ß¨‡ß¶ ‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶¨‡ßç‡¶¶', '‡ß´‡ßÆ‡ß¶ ‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶¨‡ßç‡¶¶', '‡ß´‡ßØ‡ß¶ ‡¶ñ‡ßç‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶¨‡ßç‡¶¶'],
        correctAnswer: 0
    },
    {
        id: 2,
        type: 'mcq',
        question: '‡¶∞‡¶æ‡¶∏‡ßÇ‡¶≤‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π Ô∑∫ ‡¶è‡¶∞ ‡¶™‡¶ø‡¶§‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ï‡ßÄ?',
        options: ['‡¶Ü‡¶¨‡ßÅ ‡¶§‡¶æ‡¶≤‡¶ø‡¶¨', '‡¶Ü‡¶¨‡¶¶‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π', '‡¶Ü‡¶¨‡¶¶‡ßÅ‡¶≤ ‡¶Æ‡ßÅ‡¶§‡ßç‡¶§‡¶æ‡¶≤‡¶ø‡¶¨', '‡¶Ü‡¶¨‡ßÅ ‡¶¨‡¶ï‡¶∞'],
        correctAnswer: 1
    },
    {
        id: 3,
        type: 'mcq',
        question: '‡¶∞‡¶æ‡¶∏‡ßÇ‡¶≤‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π Ô∑∫ ‡¶è‡¶∞ ‡¶¶‡ßÅ‡¶ß ‡¶Æ‡¶æ‡¶§‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ï‡ßÄ?',
        options: ['‡¶Ü‡¶Æ‡¶ø‡¶®‡¶æ', '‡¶π‡¶æ‡¶≤‡¶ø‡¶Æ‡¶æ', '‡¶ñ‡¶æ‡¶¶‡¶ø‡¶ú‡¶æ', '‡¶Ü‡¶Ø‡¶º‡¶ø‡¶∂‡¶æ'],
        correctAnswer: 1
    },
    {
        id: 4,
        type: 'mcq',
        question: '‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ï‡ßã‡¶® ‡¶Æ‡¶π‡¶ø‡¶≤‡¶æ ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡ßá‡¶®?',
        options: ['‡¶Ü‡¶Ø‡¶º‡¶ø‡¶∂‡¶æ ‡¶∞‡¶æ.', '‡¶´‡¶æ‡¶§‡¶ø‡¶Æ‡¶æ ‡¶∞‡¶æ.', '‡¶ñ‡¶æ‡¶¶‡¶ø‡¶ú‡¶æ ‡¶∞‡¶æ.', '‡¶π‡¶æ‡¶´‡¶∏‡¶æ ‡¶∞‡¶æ.'],
        correctAnswer: 2
    },
    {
        id: 5,
        type: 'mcq',
        question: '‡¶π‡¶ø‡¶ú‡¶∞‡¶§‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∞‡¶æ‡¶∏‡ßÇ‡¶≤‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π Ô∑∫ ‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßÄ ‡¶ï‡ßá ‡¶õ‡¶ø‡¶≤‡ßá‡¶®?',
        options: ['‡¶â‡¶Æ‡¶∞ ‡¶∞‡¶æ.', '‡¶Ü‡¶¨‡ßÅ ‡¶¨‡¶ï‡¶∞ ‡¶∞‡¶æ.', '‡¶â‡¶∏‡¶Æ‡¶æ‡¶® ‡¶∞‡¶æ.', '‡¶Ü‡¶≤‡ßÄ ‡¶∞‡¶æ.'],
        correctAnswer: 1
    },
    {
        id: 6,
        type: 'mcq',
        question: '‡¶¨‡¶¶‡¶∞ ‡¶Ø‡ßÅ‡¶¶‡ßç‡¶ß ‡¶ï‡ßã‡¶® ‡¶∏‡¶æ‡¶≤‡ßá ‡¶∏‡¶Ç‡¶ò‡¶ü‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º?',
        options: ['‡ß® ‡¶π‡¶ø‡¶ú‡¶∞‡ßÄ', '‡ß© ‡¶π‡¶ø‡¶ú‡¶∞‡ßÄ', '‡ß™ ‡¶π‡¶ø‡¶ú‡¶∞‡ßÄ', '‡ß´ ‡¶π‡¶ø‡¶ú‡¶∞‡ßÄ'],
        correctAnswer: 0
    },
    {
        id: 7,
        type: 'mcq',
        question: '‡¶â‡¶π‡ßÅ‡¶¶ ‡¶Ø‡ßÅ‡¶¶‡ßç‡¶ß‡ßá ‡¶∞‡¶æ‡¶∏‡ßÇ‡¶≤‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π Ô∑∫ ‡¶è‡¶∞ ‡¶ï‡¶Ø‡¶º‡¶ü‡¶ø ‡¶¶‡¶æ‡¶Å‡¶§ ‡¶∂‡¶π‡ßÄ‡¶¶ ‡¶π‡¶Ø‡¶º?',
        options: ['‡ßß‡¶ü‡¶ø', '‡ß®‡¶ü‡¶ø', '‡ß©‡¶ü‡¶ø', '‡ß™‡¶ü‡¶ø'],
        correctAnswer: 1
    },
    {
        id: 8,
        type: 'mcq',
        question: '‡¶Æ‡¶ï‡ßç‡¶ï‡¶æ ‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º ‡¶ï‡ßã‡¶® ‡¶∏‡¶æ‡¶≤‡ßá ‡¶π‡¶Ø‡¶º?',
        options: ['‡ß¨ ‡¶π‡¶ø‡¶ú‡¶∞‡ßÄ', '‡ß≠ ‡¶π‡¶ø‡¶ú‡¶∞‡ßÄ', '‡ßÆ ‡¶π‡¶ø‡¶ú‡¶∞‡ßÄ', '‡ßØ ‡¶π‡¶ø‡¶ú‡¶∞‡ßÄ'],
        correctAnswer: 2
    },
    {
        id: 9,
        type: 'mcq',
        question: '‡¶™‡¶ø‡¶§‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶ï ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡¶¨‡¶ø‡¶ú‡¶ø‡¶∞ ‡¶¨‡¶Ç‡¶∂‡¶ß‡¶æ‡¶∞‡¶æ‡¶Ø‡¶º "‡¶Æ‡ßÅ‡¶¶‡¶∞‡¶ø‡¶ï‡¶æ" -‡¶è‡¶∞ ‡¶™‡ßÅ‡¶§‡ßç‡¶∞ ‡¶ï‡ßá?',
        options: ['‡¶Æ‡ßÅ‡¶¶‡¶∞', '‡¶∞‡ßÇ‡¶π', '‡¶ñ‡ßÅ‡¶Ø‡¶æ‡¶á‡¶Æ‡¶æ‡¶π', '‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï'],
        correctAnswer: 2
    },
    
    // ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶ó‡ßÅ‡¶≤‡ßã 
    {
        id: 10,
        type: 'short',
        question: '‡¶∞‡¶æ‡¶∏‡ßÇ‡¶≤‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π Ô∑∫ ‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶§‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ï‡ßÄ?',
        correctAnswer: ['‡¶Ü‡¶Æ‡¶ø‡¶®‡¶æ', 'amina']
    },
    {
        id: 11,
        type: 'short',
        question: '‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ì‡¶π‡ßÄ ‡¶ï‡ßã‡¶® ‡¶∏‡ßÇ‡¶∞‡¶æ‡¶∞ ‡¶Ü‡¶Ø‡¶º‡¶æ‡¶§ ‡¶õ‡¶ø‡¶≤?',
        correctAnswer: ['‡¶Ü‡¶≤‡¶æ‡¶ï', 'alaq', 'alak']
    },
    {
        id: 12,
        type: 'short',
        question: '‡¶∞‡¶æ‡¶∏‡ßÇ‡¶≤‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π Ô∑∫ ‡¶ï‡¶§ ‡¶¨‡¶õ‡¶∞ ‡¶¨‡¶Ø‡¶º‡¶∏‡ßá ‡¶®‡¶¨‡ßÅ‡¶ì‡¶Ø‡¶º‡¶æ‡¶§ ‡¶≤‡¶æ‡¶≠ ‡¶ï‡¶∞‡ßá‡¶®? (‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ)',
        correctAnswer: ['‡ß™‡ß¶', '40', '‡¶ö‡¶≤‡ßç‡¶≤‡¶ø‡¶∂']
    }
];
	
        var state = {
            view: 'start',
            participant: { name: '', phone: '' },
            answers: {},
            currentQuestion: 0,
            timeLeft: 1 * 60,
            startTime: null,
            timerInterval: null,
            loading: false,
            lastSubmission: null,
            submittedPhones: {},
            exitCount: 0,
            sessionId: null,
            warningPlayed: false
        };

        var audioContext = null;
        var hasPlayedWarning = false;
        
        function initAudio() {
            try {
                var AudioContext = window.AudioContext || window.webkitAudioContext;
                if (AudioContext) {
                    audioContext = new AudioContext();
                }
            } catch (e) {
                console.log('Audio not supported');
            }
        }
        
        function playWarningBeep() {
            if (!audioContext || hasPlayedWarning) return;
            
            try {
                if (navigator.vibrate) {
                    navigator.vibrate([200, 100, 200, 100, 200, 100, 200, 100, 200, 100, 200, 100, 200, 100, 200, 100, 200, 100, 200]);
                }
                
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                
                var startTime = audioContext.currentTime;
                var beepInterval = 0.7;
                var totalDuration = 5;
                var beepCount = Math.floor(totalDuration / beepInterval);
                
                for (var i = 0; i < beepCount; i++) {
                    (function(index) {
                        var oscillator = audioContext.createOscillator();
                        var gainNode = audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        
                        oscillator.type = 'sine';
                        oscillator.frequency.setValueAtTime(800, startTime + (index * beepInterval));
                        
                        gainNode.gain.setValueAtTime(0, startTime + (index * beepInterval));
                        gainNode.gain.linearRampToValueAtTime(0.3, startTime + (index * beepInterval) + 0.05);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + (index * beepInterval) + 0.4);
                        
                        oscillator.start(startTime + (index * beepInterval));
                        oscillator.stop(startTime + (index * beepInterval) + 0.4);
                    })(i);
                }
                
                hasPlayedWarning = true;
            } catch (e) {
                console.log('Warning error:', e);
            }
        }

        function generateSessionId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function saveState() {
            try {
                var data = {
                    view: state.view,
                    participant: state.participant,
                    answers: state.answers,
                    currentQuestion: state.currentQuestion,
                    timeLeft: state.timeLeft,
                    startTime: state.startTime,
                    submittedPhones: state.submittedPhones,
                    exitCount: state.exitCount,
                    sessionId: state.sessionId
                };
                localStorage.setItem('seerahQuiz', JSON.stringify(data));
            } catch (e) {
                console.error('Save error:', e);
            }
        }

        function loadState() {
            try {
                var saved = localStorage.getItem('seerahQuiz');
                if (!saved) return;
                
                var data = JSON.parse(saved);
                
                if (data.view === 'quiz' && data.sessionId) {
                    state.view = data.view;
                    state.participant = data.participant;
                    state.answers = data.answers;
                    state.currentQuestion = data.currentQuestion;
                    state.timeLeft = data.timeLeft;
                    state.startTime = data.startTime;
                    state.exitCount = data.exitCount;
                    state.sessionId = data.sessionId;
                    
                    if (data.startTime) {
                        var elapsed = Math.floor((Date.now() - data.startTime) / 1000);
                        state.timeLeft = Math.max(0, 60 - elapsed);
                        
                        if (state.timeLeft <= 0) {
                            submitQuiz();
                            return;
                        }
                    }
                    
                    state.exitCount++;
                    
                    if (state.exitCount > 2) {
                        alert('‚ö†Ô∏è ‡¶Ü‡¶™‡¶®‡¶ø ‡ß® ‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶¨‡ßá‡¶∞ ‡¶π‡¶Ø‡¶º‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡¶®!');
                        resetQuiz();
                        return;
                    }
                    
                    saveState();
                    showExitWarning();
                    return;
                }
                
                if (data.submittedPhones) {
                    state.submittedPhones = data.submittedPhones;
                }
            } catch (e) {
                console.error('Load error:', e);
            }
        }

        function showExitWarning() {
            var modal = document.createElement('div');
            modal.className = 'modal';
            modal.id = 'exitModal';
            modal.innerHTML = '<div class="modal-inner"><div class="modal-content">' +
                '<div style="font-size: 50px; margin-bottom: 15px;">‚ö†Ô∏è</div>' +
                '<h3 style="color: #dc2626; margin-bottom: 12px; font-size: 20px; font-weight: 800;">‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ!</h3>' +
                '<p style="color: #374151; margin-bottom: 12px; font-size: 15px; font-weight: 600;">' +
                '‡¶Ü‡¶™‡¶®‡¶ø ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡ßá‡¶∞ ‡¶π‡¶Ø‡¶º‡ßá ‡¶ó‡¶ø‡¶Ø‡¶º‡ßá‡¶õ‡¶ø‡¶≤‡ßá‡¶®‡•§</p>' +
                '<div style="background: #fee2e2; padding: 12px; border-radius: 10px; margin-bottom: 15px; border: 2px solid #fca5a5;">' +
                '<p style="color: #dc2626; font-weight: 800; font-size: 18px; margin: 0;">‡¶¨‡ßá‡¶∞ ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ: ' + state.exitCount + '/2</p>' +
                '</div>' +
                '<p style="color: ' + (state.exitCount === 2 ? '#dc2626' : '#6b7280') + '; font-size: 13px; margin-bottom: 20px; font-weight: ' + (state.exitCount === 2 ? '700' : '500') + ';">' +
                (state.exitCount === 2 ? 'üö® ‡¶Ü‡¶∞‡ßá‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶¨‡ßá‡¶∞ ‡¶π‡¶≤‡ßá ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤!' : '‚ö†Ô∏è ‡¶∏‡¶§‡¶∞‡ßç‡¶ï ‡¶•‡¶æ‡¶ï‡ßÅ‡¶®‡•§') + '</p>' +
                '<button onclick="closeExitWarning()" style="background: #10b981; color: white; border: none; padding: 12px 30px; border-radius: 10px; font-size: 15px; font-weight: 700; cursor: pointer;">' +
                '‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶®</button></div></div>';
            document.body.appendChild(modal);
        }

        function closeExitWarning() {
            var modal = document.getElementById('exitModal');
            if (modal) {
                modal.parentNode.removeChild(modal);
            }
            startTimer();
            render();
        }

        function resetQuiz() {
            if (state.timerInterval) clearInterval(state.timerInterval);
            document.body.className = '';
            hasPlayedWarning = false;
            var submittedPhones = state.submittedPhones;
            state = {
                view: 'start',
                participant: { name: '', phone: '' },
                answers: {},
                currentQuestion: 0,
                timeLeft: 60,
                startTime: null,
                timerInterval: null,
                loading: false,
                lastSubmission: null,
                submittedPhones: submittedPhones,
                exitCount: 0,
                sessionId: null,
                warningPlayed: false
            };
            saveState();
            render();
        }

        function formatTime(sec) {
            var m = Math.floor(sec / 60);
            var s = sec % 60;
            return m + ':' + (s < 10 ? '0' : '') + s;
        }

        function startQuiz() {
            var nameInput = document.getElementById('name');
            var phoneInput = document.getElementById('phone');
            
            if (!nameInput || !phoneInput) return;
            
            var name = nameInput.value.replace(/^\s+|\s+$/g, '');
            var phone = phoneInput.value.replace(/^\s+|\s+$/g, '');
            
            if (!name || !phone) {
                alert('‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®');
                return;
            }

            if (!/^01\d{9}$/.test(phone)) {
                alert('‡¶∏‡¶†‡¶ø‡¶ï ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®');
                return;
            }

            if (state.submittedPhones[phone]) {
                alert('‡¶è‡¶á ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
                return;
            }
            
            state.participant = { name: name, phone: phone };
            state.startTime = Date.now();
            state.sessionId = generateSessionId();
            state.view = 'quiz';
            state.exitCount = 0;
            saveState();
            startTimer();
            render();
        }

        function startTimer() {
            if (state.timerInterval) clearInterval(state.timerInterval);
            
            if (!audioContext) {
                initAudio();
            }
            
            state.timerInterval = setInterval(function() {
                state.timeLeft--;
                saveState();
                if (state.timeLeft <= 0) submitQuiz();
                updateTimer();
            }, 1000);
        }

        function updateTimer() {
            var el = document.getElementById('timer');
            if (el) {
                el.textContent = formatTime(state.timeLeft);
                el.className = state.timeLeft <= 30 ? 'timer warning' : 'timer';
            }
            
            if (state.timeLeft === 30 && !hasPlayedWarning) {
                document.body.className = 'warning-time';
                playWarningBeep();
                
                setTimeout(function() {
                    if (state.timeLeft > 0 && state.timeLeft < 30) {
                        document.body.className = '';
                    }
                }, 30000);
            }
        }

        function submitQuiz() {
            if (state.timerInterval) clearInterval(state.timerInterval);
            document.body.className = '';
            document.body.style.background = '#0f766e';
            document.body.style.background = 'linear-gradient(135deg, #0f766e 0%, #065f46 50%, #064e3b 100%)';
            hasPlayedWarning = false;
            state.loading = true;
            render();
            
            var timeTaken = Math.floor((Date.now() - state.startTime) / 1000);
            var correct = 0;
            var wrong = 0;
            
            var timeTaken = Math.floor((Date.now() - state.startTime) / 1000);
var correct = 0;
var wrong = 0;

for (var i = 0; i < QUESTIONS.length; i++) {
    var q = QUESTIONS[i];
    if (state.answers[q.id] !== undefined) {
        if (q.type === 'mcq') {
            // MCQ ‡¶ö‡ßá‡¶ï
            if (state.answers[q.id] === q.correctAnswer) {
                correct++;
            } else {
                wrong++;
            }
        } else if (q.type === 'short') {
            // Short answer ‡¶ö‡ßá‡¶ï
            var userAnswer = state.answers[q.id].toLowerCase().trim();
            var isCorrect = false;
            
            for (var j = 0; j < q.correctAnswer.length; j++) {
                if (userAnswer === q.correctAnswer[j].toLowerCase().trim()) {
                    isCorrect = true;
                    break;
                }
            }
            
            if (isCorrect) {
                correct++;
            } else {
                wrong++;
            }
        }
    }
}

            var submission = {
                sessionId: state.sessionId,
                name: state.participant.name,
                phone: state.participant.phone,
                correct: correct,
                wrong: wrong,
                unanswered: QUESTIONS.length - correct - wrong,
                timeTaken: formatTime(timeTaken),
                exitCount: state.exitCount,
                timestamp: Date.now()
            };

            if (GOOGLE_SCRIPT_URL !== 'YOUR_GOOGLE_SCRIPT_URL_HERE') {
                var xhr = new XMLHttpRequest();
                xhr.open('POST', GOOGLE_SCRIPT_URL, true);
                xhr.send(JSON.stringify(submission));
            }

            state.submittedPhones[state.participant.phone] = Date.now();
            state.lastSubmission = submission;
            state.loading = false;
            state.view = 'submitted';
            state.sessionId = null;
            state.exitCount = 0;
            saveState();
            render();
        }

     function selectAnswer(qId, idx) {
    state.answers[qId] = idx;
    saveState();
    render();
}

function selectShortAnswer(qId) {
    var input = document.getElementById('short-input-' + qId);
    if (input) {
        state.answers[qId] = input.value.trim();
        saveState();
        render();
    }
}

        function nextQuestion() {
            if (state.currentQuestion < QUESTIONS.length - 1) {
                state.currentQuestion++;
                saveState();
                render();
            }
        }

        function prevQuestion() {
            if (state.currentQuestion > 0) {
                state.currentQuestion--;
                saveState();
                render();
            }
        }

        function renderStart() {
            document.body.className = '';
            var html = '<div class="container"><div class="card">' +
                '<h1>‡¶∏‡ßÄ‡¶∞‡¶æ‡¶§‡ßÅ‡¶® ‡¶®‡¶¨‡ßÄ Ô∑∫ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶Ø‡ßã‡¶ó‡¶ø‡¶§‡¶æ</h1>' +
                '<p class="subtitle">‡¶∞‡¶æ‡¶∏‡ßÇ‡¶≤‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π Ô∑∫ ‡¶è‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡ßÄ ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶ú‡ßç‡¶û‡¶æ‡¶® ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶Ø‡ßã‡¶ó‡¶ø‡¶§‡¶æ</p>' +
                '<div class="info-box"><h3>‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶Ø‡ßã‡¶ó‡¶ø‡¶§‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£:</h3><ul>' +
                '<li>‡¶Æ‡ßã‡¶ü ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®: ' + toBengaliNumber(QUESTIONS.length) + '‡¶ü‡¶ø MCQ+Short Question</li>' +
                '<li>‡¶∏‡¶Æ‡¶Ø‡¶º: ‡ßß ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</li>' +
                '<li>‡ß® ‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶¨‡ßá‡¶∞ ‡¶π‡¶≤‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶∞‡ßá ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶π‡¶¨‡ßá</li>' +
                '<li>‡¶∏‡¶¨ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶ø‡¶®</li>' +
                '</ul></div>' +
                '<div class="warning-box"><p>‚ö†Ô∏è ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</p></div>' +
                '<div class="form-group"><label>üë§ ‡¶®‡¶æ‡¶Æ* (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ/English)</label>' +
                '<input type="text" id="name" placeholder="‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" ></div>' +
                '<div class="form-group"><label>üì± ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞* (English)</label>' +
                '<input type="tel" id="phone" placeholder="01XXXXXXXXX"  maxlength="11"></div>' +
                '<button class="btn btn-primary" onclick="startQuiz()">‡¶¨‡¶ø‡¶∏‡¶Æ‡¶ø‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶π‡¶Æ‡¶æ‡¶®‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶π‡ßÄ‡¶Æ</button>' +
                '</div></div>';
            return html;
        }

        function renderQuiz() {
            if (state.loading) {
                return '<div class="container"><div class="card">' +
                    '<div class="loading"><div class="loading-spinner"></div>' +
                    '<p style="margin-top:15px; font-size:16px; font-weight:600;">‡¶ú‡¶Æ‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>' +
                    '</div></div></div>';
            }

            var q = QUESTIONS[state.currentQuestion];
            var progress = ((state.currentQuestion + 1) / QUESTIONS.length) * 100;
            
            if (state.timeLeft <= 30) {
                document.body.className = 'warning-time';
            } else {
                document.body.className = '';
            }
			
			var opts = '';

if (q.type === 'mcq') {
    // MCQ ‡¶Ö‡¶™‡¶∂‡¶®
    for (var i = 0; i < q.options.length; i++) {
        var sel = state.answers[q.id] === i ? 'selected' : '';
        opts += '<button class="option ' + sel + '" onclick="selectAnswer(' + q.id + ', ' + i + ')">' +
            '<strong>' + getBengaliOption(i) + '.</strong> ' + q.options[i] +
            '</button>';
    }
} else if (q.type === 'short') {
    // Short answer input
    var currentAnswer = state.answers[q.id] || '';
    var filledClass = currentAnswer ? 'filled' : '';
    opts = '<input type="text" ' +
        'id="short-input-' + q.id + '" ' +
        'class="short-answer-input ' + filledClass + '" ' +
        'placeholder="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" ' +
        'value="' + currentAnswer + '" ' +
        'oninput="selectShortAnswer(' + q.id + ')">';
}

            var isLast = state.currentQuestion === QUESTIONS.length - 1;
           
            var html = '<div class="container">' +
                '<div class="timer-box">' +
                '<div class="timer-header">' +
               '<div class="timer-info">üìù ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ' + toBengaliNumber(state.currentQuestion + 1) + '/' + toBengaliNumber(QUESTIONS.length) + '</div>' +
                '<div class="' + (state.timeLeft <= 30 ? 'timer warning' : 'timer') + '">‚è∞ <span id="timer">' + formatTime(state.timeLeft) + '</span></div>' +
                '</div>' +
                '<div class="progress-bar"><div class="progress-fill" style="width:' + progress + '%"></div></div>' +
                '</div>' +
                '<div class="question-card">' +
                '<span class="question-badge">' + (q.type === 'mcq' ? '‡¶¨‡¶π‡ßÅ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶®‡ßÄ' : '‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§') + '</span>' +
                '<div class="question-text">' + q.question + '</div>' +
                opts +
                '</div>' +
                  '<div class="nav-buttons">' +
'<button class="btn btn-secondary" onclick="prevQuestion()" ' + (state.currentQuestion === 0 ? 'disabled' : '') + '><span style="font-size: 20px;">‚Üê</span> ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶¨‡¶∞‡ßç‡¶§‡ßÄ</button>';

if (isLast) {
    html += '<button class="btn btn-danger" onclick="submitQuiz()">‚úì ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</button>';
} else {
    html += '<span style="flex: 1;"></span>';
}

html += '<button class="btn btn-secondary" onclick="nextQuestion()" ' + (isLast ? 'disabled' : '') + '>‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ <span style="font-size: 20px;">‚Üí</span></button>';
html += '</div></div>';
            return html;
        }

        function renderSubmitted() {
            return '<div class="container"><div class="card">' +
                '<div class="success-icon">‚úÖ</div>' +
                '<div class="success-message">' +
                '<h2>‡¶ú‡¶Æ‡¶æ ‡¶∏‡¶´‡¶≤ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!</h2>' +
                '<p style="font-size:17px; margin:15px 0;">' + state.participant.name + ', ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶™‡¶§‡ßç‡¶∞ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§</p>' +
                '<div class="info-box" style="margin-top:20px;">' +
                '<h3>üìä ‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶´‡¶≤‡¶æ‡¶´‡¶≤‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶™‡¶∞‡ßá ‡¶ú‡¶æ‡¶®‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá‡•§</h3><ul>' +
                '<li>‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞: <strong>' + state.lastSubmission.correct + '‡¶ü‡¶ø</strong></li>' +
                '<li>‡¶≠‡ßÅ‡¶≤ ‡¶â‡¶§‡ßç‡¶§‡¶∞: <strong>' + state.lastSubmission.wrong + '‡¶ü‡¶ø</strong></li>' +
                '<li>‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶®‡¶®‡¶ø: <strong>' + state.lastSubmission.unanswered + '‡¶ü‡¶ø</strong></li>' +
                '<li>‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶≤‡ßá‡¶ó‡ßá‡¶õ‡ßá: <strong>' + state.lastSubmission.timeTaken + '</strong></li>' +
                '</ul></div>' +
                '<p style="color:#6b7280; margin-top:20px; font-size: 14px;">‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶â‡¶§‡ßç‡¶§‡¶Æ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶æ‡¶® ‡¶¶‡¶ø‡¶®‡•§ ü§≤</p>' +
                '</div></div></div>';
        }

        function render() {
            var app = document.getElementById('app');
            if (state.view === 'start') {
                app.innerHTML = renderStart();
            } else if (state.view === 'quiz') {
                app.innerHTML = renderQuiz();
            } else if (state.view === 'submitted') {
                app.innerHTML = renderSubmitted();
            }
        }

        var hiddenTime = null;

        window.onbeforeunload = function(e) {
            if (state.view === 'quiz' && state.sessionId) {
                saveState();
                e = e || window.event;
                if (e) {
                    e.returnValue = '';
                }
                return '';
            }
        };

        if (document.addEventListener) {
            document.addEventListener('visibilitychange', function() {
                if (state.view !== 'quiz' || !state.sessionId) return;

                if (document.hidden) {
                    hiddenTime = Date.now();
                    saveState();
                } else {
                    if (hiddenTime) {
                        var awayTime = Math.floor((Date.now() - hiddenTime) / 1000);
                        
                        if (awayTime >= 3) {
                            state.exitCount++;
                            
                            if (state.exitCount > 2) {
                                if (state.timerInterval) clearInterval(state.timerInterval);
                                alert('‚ö†Ô∏è ‡¶Ü‡¶™‡¶®‡¶ø ‡ß® ‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡ßá‡¶∞ ‡¶π‡¶Ø‡¶º‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡¶®!');
                                resetQuiz();
                                return;
                            }
                            
                            saveState();
                            showExitWarning();
                            return;
                        }
                        
                        hiddenTime = null;
                    }
                    
                    if (state.timerInterval) {
                        clearInterval(state.timerInterval);
                    }
                    startTimer();
                    render();
                }
            });
        }

        window.onload = function() {
            loadState();
            if (state.view === 'quiz' && state.sessionId && state.exitCount > 0) return;
            render();
        };

    </script>
</body>
</html>
